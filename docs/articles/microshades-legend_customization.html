<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Legend Customization • microshades</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Legend Customization">
<meta property="og:description" content="microshades">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-196876408-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-196876408-1');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">microshades</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.12</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/microshades-GP.html">Global Patterns Data</a>
    </li>
    <li>
      <a href="../articles/microshades-HMP.html">Human Microbiome Project</a>
    </li>
    <li>
      <a href="../articles/microshades-HMP2.html">Human Microbiome Project 2</a>
    </li>
    <li>
      <a href="../articles/microshades-legend_customization.html">Legend Customization</a>
    </li>
    <li>
      <a href="../articles/non-microbiome_data.html">Palmer Penguins Data Example</a>
    </li>
    <li>
      <a href="../articles/remove_na_option.html">Remove NA Option</a>
    </li>
    <li>
      <a href="../articles/titanic_data_example.html">Titanic Data Example</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/KarstensLab/microshades/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Legend Customization</h1>
                        <h4 data-toc-skip class="author">Christina
Turner, Anagha Shenoy, Lisa Karstens</h4>
            
            <h4 data-toc-skip class="date">May 15, 2024</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/KarstensLab/microshades/blob/HEAD/vignettes/microshades-legend_customization.Rmd" class="external-link"><code>vignettes/microshades-legend_customization.Rmd</code></a></small>
      <div class="hidden name"><code>microshades-legend_customization.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>This tutorial is a shortened version of the <a href="https://karstenslab.github.io/microshades/articles/microshades-GP.html" class="external-link">Global
Patterns tutorial</a>, and focuses on how to customize your figures
using the <code><a href="../reference/custom_legend.html">custom_legend()</a></code> function from the <a href="https://github.com/KarstensLab/microshades" class="external-link">microshades</a>
package created by the Karstens Lab.</p>
<p>For this tutorial, we will be using the Global Patterns microbiome
data available from <a href="https://bioconductor.org/packages/release/bioc/html/phyloseq.html" class="external-link">phyloseq</a>,
which includes water, land, and human samples. Additionally we use the
package <a href="https://github.com/mikemc/speedyseq" class="external-link">speedyseq</a> to
improve the speed of phyloseq’s plotting and taxonomic merging
functions.</p>
<p>To cite microshades: Dahl EM, Neer E, Bowie KR, Leung ET, Karstens L.
2022. microshades: An R Package for Improving Color Accessibility and
Organization of Microbiome Data. Microbiol Resour Announc 11:e00795-22.
<a href="https://doi.org/10.1128/mra.00795-22" class="external-link uri">https://doi.org/10.1128/mra.00795-22</a></p>
</div>
<div class="section level2">
<h2 id="prepare-workspace">Prepare workspace<a class="anchor" aria-label="anchor" href="#prepare-workspace"></a>
</h2>
<div class="section level3">
<h3 id="load-the-required-packages">Load the required packages<a class="anchor" aria-label="anchor" href="#load-the-required-packages"></a>
</h3>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://karstenslab.github.io/microshades" class="external-link">microshades</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://dx.plos.org/10.1371/journal.pone.0061217" class="external-link">phyloseq</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://wilkelab.org/cowplot/" class="external-link">cowplot</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://patchwork.data-imaginist.com" class="external-link">patchwork</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://forcats.tidyverse.org/" class="external-link">forcats</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="load-the-data">Load the data<a class="anchor" aria-label="anchor" href="#load-the-data"></a>
</h3>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># load the Global Patterns dataset, which is a phyloseq object available from the Phyloseq package.</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"GlobalPatterns"</span><span class="op">)</span></span>
<span><span class="va">GlobalPatterns</span></span></code></pre></div>
<pre><code><span><span class="co">## phyloseq-class experiment-level object</span></span>
<span><span class="co">## otu_table()   OTU Table:         [ 19216 taxa and 26 samples ]</span></span>
<span><span class="co">## sample_data() Sample Data:       [ 26 samples by 7 sample variables ]</span></span>
<span><span class="co">## tax_table()   Taxonomy Table:    [ 19216 taxa by 7 taxonomic ranks ]</span></span>
<span><span class="co">## phy_tree()    Phylogenetic Tree: [ 19216 tips and 19215 internal nodes ]</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="prepare-the-data-for-microshades">Prepare the data for microshades<a class="anchor" aria-label="anchor" href="#prepare-the-data-for-microshades"></a>
</h3>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Agglomerate and normalize the phyloseq object, and melt to a dataframe. </span></span>
<span><span class="va">mdf_prep</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/prep_mdf.html">prep_mdf</a></span><span class="op">(</span><span class="va">GlobalPatterns</span>, remove_na <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Generate a color object for the specified data</span></span>
<span><span class="va">color_objs_GP</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_color_dfs.html">create_color_dfs</a></span><span class="op">(</span><span class="va">mdf_prep</span>, selected_groups <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Verrucomicrobia"</span>, <span class="st">"Proteobacteria"</span>, <span class="st">"Actinobacteria"</span>, <span class="st">"Bacteroidetes"</span>, <span class="st">"Firmicutes"</span><span class="op">)</span>, cvd <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Extract</span></span>
<span><span class="va">mdf_GP</span> <span class="op">&lt;-</span> <span class="va">color_objs_GP</span><span class="op">$</span><span class="va">mdf</span></span>
<span><span class="va">cdf_GP</span> <span class="op">&lt;-</span> <span class="va">color_objs_GP</span><span class="op">$</span><span class="va">cdf</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="plot-with-default-legend">Plot with default legend<a class="anchor" aria-label="anchor" href="#plot-with-default-legend"></a>
</h2>
<p>With microshades, the mdf object (mdf_GP in the example) contains the
data to plot and the cdf object (cdf_GP in the example) is used for the
color assignments.</p>
<p>The <code>plot_microshades</code> function returns a ggplot object,
which allows for additional specifications for the plot to be declared,
such as faceting by sample type as in the example below.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">plot</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/plot_microshades.html">plot_microshades</a></span><span class="op">(</span><span class="va">mdf_GP</span>, <span class="va">cdf_GP</span><span class="op">)</span></span>
<span></span>
<span><span class="va">plot_default</span> <span class="op">&lt;-</span> <span class="va">plot</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">SampleType</span>, scales<span class="op">=</span><span class="st">"free_x"</span>, nrow<span class="op">=</span><span class="fl">2</span><span class="op">)</span></span>
<span></span>
<span><span class="va">plot_default</span></span></code></pre></div>
<p><img src="microshades-legend_customization_files/figure-html/unnamed-chunk-4-1.png" width="1344"></p>
</div>
<div class="section level2">
<h2 id="plot-with-custom-legend">Plot with custom legend<a class="anchor" aria-label="anchor" href="#plot-with-custom-legend"></a>
</h2>
<p>The default legend in microshades is not necessarily ideal for
publication or presentations. To make an improved legend, you can use
the <code>custom_legend</code> microshade function. This function needs
to be used with <code>plot_grid</code> from the <a href="https://wilkelab.org/cowplot/" class="external-link">cowplot</a> package to output the
plot and custom legend together.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create the custom legend</span></span>
<span><span class="va">legend_1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/custom_legend.html">custom_legend</a></span><span class="op">(</span><span class="va">mdf_GP</span>, <span class="va">cdf_GP</span><span class="op">)</span>  </span>
<span></span>
<span><span class="co"># plot using the custom legend </span></span>
<span><span class="va">plot_1</span> <span class="op">&lt;-</span> <span class="va">plot</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>legend.position<span class="op">=</span><span class="st">"none"</span><span class="op">)</span> <span class="op">+</span> <span class="co"># removes the original legend.</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">SampleType</span>, scales<span class="op">=</span><span class="st">"free_x"</span>, nrow<span class="op">=</span><span class="fl">2</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># output the plot and custom legend</span></span>
<span><span class="fu"><a href="https://wilkelab.org/cowplot/reference/plot_grid.html" class="external-link">plot_grid</a></span><span class="op">(</span><span class="va">plot_1</span>, <span class="va">legend_1</span><span class="op">)</span>  </span></code></pre></div>
<p><img src="microshades-legend_customization_files/figure-html/unnamed-chunk-5-1.png" width="1344"></p>
</div>
<div class="section level2">
<h2 id="adjust-legend-size">Adjust legend size<a class="anchor" aria-label="anchor" href="#adjust-legend-size"></a>
</h2>
<p>The legend is small and texts are difficult to view. We can specify
the parameters for <code>legend_key_size</code> and
<code>legend_text_size</code> to modify the legend.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create the custom legend</span></span>
<span><span class="va">legend_2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/custom_legend.html">custom_legend</a></span><span class="op">(</span><span class="va">mdf_GP</span>, <span class="va">cdf_GP</span>, legend_key_size <span class="op">=</span> <span class="fl">1.2</span>, legend_text_size <span class="op">=</span> <span class="fl">14</span><span class="op">)</span> <span class="co"># adjust size with legend_key_size and texts with legend_text_size. </span></span>
<span></span>
<span><span class="co"># plot using the custom legend </span></span>
<span><span class="va">plot_2</span> <span class="op">&lt;-</span> <span class="va">plot</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>legend.position<span class="op">=</span><span class="st">"none"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">SampleType</span>, scales<span class="op">=</span><span class="st">"free_x"</span>, nrow<span class="op">=</span><span class="fl">2</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># output the plot and custom legend </span></span>
<span><span class="fu"><a href="https://wilkelab.org/cowplot/reference/plot_grid.html" class="external-link">plot_grid</a></span><span class="op">(</span><span class="va">plot_2</span>, <span class="va">legend_2</span><span class="op">)</span> </span></code></pre></div>
<p><img src="microshades-legend_customization_files/figure-html/unnamed-chunk-6-1.png" width="1344"></p>
</div>
<div class="section level2">
<h2 id="adjust-legend-position">Adjust legend position<a class="anchor" aria-label="anchor" href="#adjust-legend-position"></a>
</h2>
<p>Sometimes it makes sense to lay out the legend under the plot instead
of on the right side. This is easily achieved by adjusting the code in
the <code>custom_legend</code> and <code>plot_grid</code> functions.</p>
<p>First, create a custom legend object with the
<code>legend_orientation</code> set to “horizontal”.</p>
<p>Then, use the plot_grid function with NULL and <code>legend_3</code>
as parameters to set the legend in the center position. By plotting NULL
and the custom legend in one row with relative widths of 0.04 (NULL) and
0.96 (legend), we allow for some padding on the left of the legend so
that it appears in the center of the output.</p>
<p>Lastly, use the <code>plot_grid</code> function again, but this time
to output the plot and the centered legend together.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">legend_3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/custom_legend.html">custom_legend</a></span><span class="op">(</span><span class="va">mdf_GP</span>, <span class="va">cdf_GP</span>,  legend_key_size <span class="op">=</span> <span class="fl">1.2</span>, legend_text_size <span class="op">=</span> <span class="fl">14</span>, legend_orientation <span class="op">=</span> <span class="st">"horizontal"</span><span class="op">)</span> <span class="co"># set the legend_orientation to "horizontal" to align legend horizontally.The default is vertical. </span></span>
<span></span>
<span><span class="va">center_legend_3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://wilkelab.org/cowplot/reference/plot_grid.html" class="external-link">plot_grid</a></span><span class="op">(</span><span class="cn">NULL</span>, <span class="va">legend_3</span>, nrow<span class="op">=</span><span class="fl">1</span>, rel_widths<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.04</span>, <span class="fl">0.96</span><span class="op">)</span><span class="op">)</span> <span class="co"># The rel_widths centers the legend. nrow = 1 places the legend and null space on the same level.</span></span>
<span></span>
<span><span class="fu"><a href="https://wilkelab.org/cowplot/reference/plot_grid.html" class="external-link">plot_grid</a></span><span class="op">(</span><span class="va">plot_2</span>, <span class="va">center_legend_3</span>, nrow<span class="op">=</span><span class="fl">2</span><span class="op">)</span> <span class="co"># The parameter nrow=2 aligns the legend to be below the plot. </span></span></code></pre></div>
<p><img src="microshades-legend_customization_files/figure-html/unnamed-chunk-7-1.png" width="1344"></p>
</div>
<div class="section level2">
<h2 id="adjust-legend-relative-width-and-height">Adjust legend relative width and height<a class="anchor" aria-label="anchor" href="#adjust-legend-relative-width-and-height"></a>
</h2>
<p>To make the plot larger than the legend, adjust the relative sizing
of the plot and the legend with the <code>plot_grid</code> options
rel_widths and rel_heights.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">legend_4</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/custom_legend.html">custom_legend</a></span><span class="op">(</span><span class="va">mdf_GP</span>, <span class="va">cdf_GP</span>,  legend_key_size <span class="op">=</span> <span class="fl">1.2</span>, legend_text_size <span class="op">=</span> <span class="fl">14</span>, legend_orientation <span class="op">=</span> <span class="st">"horizontal"</span><span class="op">)</span> </span>
<span></span>
<span><span class="va">center_legend_4</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://wilkelab.org/cowplot/reference/plot_grid.html" class="external-link">plot_grid</a></span><span class="op">(</span><span class="cn">NULL</span>, <span class="va">legend_4</span>, nrow<span class="op">=</span><span class="fl">1</span>, rel_widths<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.04</span>, <span class="fl">0.96</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://wilkelab.org/cowplot/reference/plot_grid.html" class="external-link">plot_grid</a></span><span class="op">(</span><span class="va">plot_2</span>, <span class="va">center_legend_4</span>, nrow<span class="op">=</span><span class="fl">2</span>,  rel_widths <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>, rel_heights <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">.25</span><span class="op">)</span><span class="op">)</span> <span class="co"># The rel_widths and rel_heights option allows you to specify the relative sizing of the plot and legend. </span></span></code></pre></div>
<p><img src="microshades-legend_customization_files/figure-html/unnamed-chunk-8-1.png" width="1344"></p>
</div>
<div class="section level2">
<h2 id="further-customization">Further customization<a class="anchor" aria-label="anchor" href="#further-customization"></a>
</h2>
<p>Creating plots in R has a benefit of ensuring reproducibility and
also enables customization. Here, we demonstrate how to make some common
adjustments, such as adding titles and changing font color.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create the custom legend</span></span>
<span><span class="va">legend_5</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/custom_legend.html">custom_legend</a></span><span class="op">(</span><span class="va">mdf_GP</span>, <span class="va">cdf_GP</span>, legend_key_size <span class="op">=</span> <span class="fl">1.2</span>, legend_text_size <span class="op">=</span> <span class="fl">14</span><span class="op">)</span> </span>
<span></span>
<span><span class="co"># plot using the custom legend </span></span>
<span><span class="va">plot_3</span> <span class="op">&lt;-</span> <span class="va">plot_2</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">'none'</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">SampleType</span>, scales<span class="op">=</span><span class="st">"free_x"</span>, nrow<span class="op">=</span><span class="fl">2</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ggtitle</a></span><span class="op">(</span><span class="st">"Relative abundance of microbes in Global Patterns data"</span><span class="op">)</span> <span class="op">+</span> <span class="co"># to add a main title to top of plot.</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>plot.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">18</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="co"># adjust text size of title</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>axis.text.x<span class="op">=</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>size<span class="op">=</span><span class="fl">12</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="co"># adjust the inner x axis text size.</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>axis.text.y<span class="op">=</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>size<span class="op">=</span><span class="fl">12</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="co"># adjusts the inner y axis text size.</span></span>
<span>  <span class="co"># theme(axis.text =element_text(size=12)) + # You can also adjust both x and y axis text size with one line of code.</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>axis.title.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">18</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="co"># adjust outer x axis label.</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>axis.title.y <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">18</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="co"># adjust outer y axis label.</span></span>
<span>  <span class="co"># theme(axis.title = element_text(size=18)) + # another way to adjust both x and y axis titles.</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>axis.ticks.y <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>  <span class="co"># to remove the tick marks on your plot.</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>plot.margin <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">margin</a></span><span class="op">(</span><span class="fl">6</span>,<span class="fl">10</span>,<span class="fl">6</span>,<span class="fl">6</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="co"># adjust margin size</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span> <span class="op">(</span>strip.text.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">12</span><span class="op">)</span><span class="op">)</span> <span class="co"># adjust text size of top labels in grey bars</span></span>
<span></span>
<span><span class="co"># output the plot and custom legend together. </span></span>
<span><span class="fu"><a href="https://wilkelab.org/cowplot/reference/plot_grid.html" class="external-link">plot_grid</a></span><span class="op">(</span><span class="va">plot_3</span>, <span class="va">legend_5</span>, rel_widths <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">0.3</span><span class="op">)</span>, rel_heights <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span>  </span></code></pre></div>
<p><img src="microshades-legend_customization_files/figure-html/unnamed-chunk-9-1.png" width="1344"></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Erin Dahl, Emory Neer, Lisa Karstens.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
