<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Generates abundance sorted data frame and a color palette data frame — create_color_dfs • microshades</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Generates abundance sorted data frame and a color palette data frame — create_color_dfs"><meta property="og:description" content="Use create_color_dfs() to create a specialized data frames containing color
and abundance organized microbiome data."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-196876408-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-196876408-1');
</script></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">microshades</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.12</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/microshades-GP.html">Global Patterns Data</a>
    </li>
    <li>
      <a href="../articles/microshades-HMP.html">Human Microbiome Project</a>
    </li>
    <li>
      <a href="../articles/microshades-HMP2.html">Human Microbiome Project 2</a>
    </li>
    <li>
      <a href="../articles/microshades-legend_customization.html">Legend Customization</a>
    </li>
    <li>
      <a href="../articles/non-microbiome_data.html">Palmer Penguins Data Example</a>
    </li>
    <li>
      <a href="../articles/remove_na_option.html">Remove NA Option</a>
    </li>
    <li>
      <a href="../articles/titanic_data_example.html">Titanic Data Example</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/KarstensLab/microshades/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Generates abundance sorted data frame and a color palette data frame</h1>
    <small class="dont-index">Source: <a href="https://github.com/KarstensLab/microshades/blob/HEAD/R/color_mapping_functions.R" class="external-link"><code>R/color_mapping_functions.R</code></a></small>
    <div class="hidden name"><code>create_color_dfs.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Use <code>create_color_dfs()</code> to create a specialized data frames containing color
and abundance organized microbiome data.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">create_color_dfs</span><span class="op">(</span></span>
<span>  <span class="va">mdf</span>,</span>
<span>  selected_groups <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Proteobacteria"</span>, <span class="st">"Actinobacteria"</span>, <span class="st">"Bacteroidetes"</span>, <span class="st">"Firmicutes"</span><span class="op">)</span>,</span>
<span>  top_n_subgroups <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  group_level <span class="op">=</span> <span class="st">"Phylum"</span>,</span>
<span>  subgroup_level <span class="op">=</span> <span class="st">"Genus"</span>,</span>
<span>  cvd <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  top_orientation <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>mdf</dt>
<dd><p>data.frame, melted data frame containing microbiome data</p></dd>


<dt>selected_groups</dt>
<dd><p>list of groups in group_level taxomomy to specify and color in plot.
The vector order is the stacking order. "Other" is always on the top of the stack,
but then the rest will follow. The default is "Proteobacteria", "Actinobacteria",
"Bacteroidetes", "Firmicutes". "Firmicutes" is on the bottom of the stack.</p></dd>


<dt>top_n_subgroups</dt>
<dd><p>integer number of top subgroups to show for each selected group
the max is 4 top subgroups</p></dd>


<dt>group_level</dt>
<dd><p>string of larger taxonomic group</p></dd>


<dt>subgroup_level</dt>
<dd><p>string of smaller taxonomic group</p></dd>


<dt>cvd</dt>
<dd><p>logical, determines which palette to use,
color vision deficent (microshades_cvd_palettes) or microshades_palettes</p></dd>


<dt>top_orientation</dt>
<dd><p>logical most abundant shades oriented at the top of the stack
otherwise, most abundant shades are bottom oriented</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>list</p><ul><li><p>"mdf" melted data frame to pass into ggplot2</p></li>
<li><p>"cdf" mapping to be used in manual color filling</p></li>
</ul></div>
    <div id="details">
    <h2>Details</h2>
    <p>The top group categories are user specified through the <code>selected_groups</code> parameter,
and top subgroup categories are dynamically generated based on abundance.
For the top group, the categories not in <code>selected_groups</code> will be changed to
"Other". The <code>top_n_subgroups</code> will be determined for each selected group.</p>
<p>Notes:</p><ul><li><p>In SILVA 138, some phylum names are different and you should consider
passing in the vector
<code>c("Proteobacteria", "Actinobacteriota", "Bacteroidota", "Firmicutes")</code></p></li>
</ul></div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://dx.plos.org/10.1371/journal.pone.0061217" class="external-link">phyloseq</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">GlobalPatterns</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">mdf</span> <span class="op">&lt;-</span> <span class="fu"><a href="prep_mdf.html">prep_mdf</a></span><span class="op">(</span><span class="va">GlobalPatterns</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">colorframe</span> <span class="op">&lt;-</span> <span class="fu">create_color_dfs</span><span class="op">(</span><span class="va">mdf</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">colorframe</span> <span class="op">&lt;-</span> <span class="fu">create_color_dfs</span><span class="op">(</span><span class="va">mdf</span>, selected_groups <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Proteobacteria"</span>, <span class="st">"Actinobacteriota"</span>, <span class="st">"Bacteroidota"</span>, <span class="st">"Firmicutes"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in create_color_dfs(mdf, selected_groups = c("Proteobacteria", "Actinobacteriota",     "Bacteroidota", "Firmicutes")):</span> some 'selected_groups' do not exist in the dataset. Consider SILVA 138 c('Proteobacteria', 'Actinobacteriota', 'Bacteroidota', 'Firmicutes')</span>
<span class="r-in"><span><span class="va">colorframe</span> <span class="op">&lt;-</span> <span class="fu">create_color_dfs</span><span class="op">(</span><span class="va">mdf</span>, cvd <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Erin Dahl, Emory Neer, Lisa Karstens.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

      </footer></div>

  


  

  </body></html>

