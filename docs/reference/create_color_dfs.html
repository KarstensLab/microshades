<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Generates abundance sorted data frame and a color palette data frame — create_color_dfs • microshades</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Generates abundance sorted data frame and a color palette data frame — create_color_dfs" />
<meta property="og:description" content="Use create_color_dfs() to create a specialized data frames containing color
and abundance organized microbiome data." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-196876408-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-196876408-1');
</script>


  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">microshades</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/microshades-CMD.html">Curated Metagenomic Data</a>
    </li>
    <li>
      <a href="../articles/microshades-GP.html">Global Patterns Data</a>
    </li>
    <li>
      <a href="../articles/microshades-HMP.html">Human Microbiome Project</a>
    </li>
    <li>
      <a href="../articles/microshades-HMP2.html">Human Microbiome Project 2</a>
    </li>
    <li>
      <a href="../articles/non-microbiome_data.html">Palmer Penguins Data Example</a>
    </li>
    <li>
      <a href="../articles/titanic_data_example.html">Titanic Data Example</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/KarstensLab/microshades/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Generates abundance sorted data frame and a color palette data frame</h1>
    <small class="dont-index">Source: <a href='https://github.com/KarstensLab/microshades/blob/master/R/color_mapping_functions.R'><code>R/color_mapping_functions.R</code></a></small>
    <div class="hidden name"><code>create_color_dfs.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Use <code>create_color_dfs()</code> to create a specialized data frames containing color
and abundance organized microbiome data.</p>
    </div>

    <pre class="usage"><span class='fu'>create_color_dfs</span><span class='op'>(</span>
  <span class='va'>mdf</span>,
  selected_groups <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Proteobacteria"</span>, <span class='st'>"Actinobacteria"</span>, <span class='st'>"Bacteroidetes"</span>,
    <span class='st'>"Firmicutes"</span><span class='op'>)</span>,
  top_n_subgroups <span class='op'>=</span> <span class='fl'>4</span>,
  group_level <span class='op'>=</span> <span class='st'>"Phylum"</span>,
  subgroup_level <span class='op'>=</span> <span class='st'>"Genus"</span>,
  cvd <span class='op'>=</span> <span class='cn'>FALSE</span>,
  top_orientation <span class='op'>=</span> <span class='cn'>FALSE</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>mdf</th>
      <td><p>data.frame, melted data frame containing microbiome data</p></td>
    </tr>
    <tr>
      <th>selected_groups</th>
      <td><p>list of groups in group_level taxomomy to specify and color in plot.
The vector order is the stacking order. "Other" is always on the top of the stack,
but then the rest will follow. The default is "Proteobacteria", "Actinobacteria",
"Bacteroidetes", "Firmicutes". "Firmicutes" is on the bottom of the stack.</p></td>
    </tr>
    <tr>
      <th>top_n_subgroups</th>
      <td><p>integer number of top subgroups to show for each selected group
the max is 4 top subgroups</p></td>
    </tr>
    <tr>
      <th>group_level</th>
      <td><p>string of larger taxonomic group</p></td>
    </tr>
    <tr>
      <th>subgroup_level</th>
      <td><p>string of smaller taxonomic group</p></td>
    </tr>
    <tr>
      <th>cvd</th>
      <td><p>logical, determines which palette to use,
color vision deficent (microshades_cvd_palettes) or microshades_palettes</p></td>
    </tr>
    <tr>
      <th>top_orientation</th>
      <td><p>logical most abundant shades oriented at the top of the stack
otherwise, most abundant shades are bottom oriented</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>list</p><ul>
<li><p>"mdf" melted data frame to pass into ggplot2</p></li>
<li><p>"cdf" mapping to be used in manual color filling</p></li>
</ul>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The top group categories are user specified through the <code>selected_groups</code> parameter,
and top subgroup categories are dynamically generated based on abundance.
For the top group, the categories not in <code>selected_groups</code> will be changed to
"Other". The <code>top_n_subgroups</code> will be determined for each selected group.</p>
<p>Notes:</p><ul>
<li><p>In SILVA 138, some phylum names are different and you should consider
passing in the vector
<code><a href='https://rdrr.io/r/base/c.html'>c("Proteobacteria", "Actinobacteriota", "Bacteroidota", "Firmicutes")</a></code></p></li>
</ul>


    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='va'>colorframe</span> <span class='op'>&lt;-</span> <span class='fu'>create_color_dfs</span><span class='op'>(</span><span class='va'>mdf</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='error'>Error in create_color_dfs(mdf): object 'mdf' not found</span></div><div class='input'><span class='va'>colorframe</span> <span class='op'>&lt;-</span> <span class='fu'>create_color_dfs</span><span class='op'>(</span><span class='va'>mdf</span>, selected_groups <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Proteobacteria"</span>, <span class='st'>"Actinobacteriota"</span>, <span class='st'>"Bacteroidota"</span>, <span class='st'>"Firmicutes"</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='error'>Error in create_color_dfs(mdf, selected_groups = c("Proteobacteria", "Actinobacteriota",     "Bacteroidota", "Firmicutes")): object 'mdf' not found</span></div><div class='input'><span class='va'>colorframe</span> <span class='op'>&lt;-</span> <span class='fu'>create_color_dfs</span><span class='op'>(</span><span class='va'>mdf</span>, cvd <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='error'>Error in create_color_dfs(mdf, cvd = TRUE): object 'mdf' not found</span></div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Erin Dahl, Lisa Karstens, Emory Neer.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


